
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Overview</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Shaker</span></a></h1>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="index.html" title="Shaker">Shaker</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="index.html">Introducing Shaker</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="shaker_starting.html">Getting started</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-shaker">
<h2>What is Shaker?<a class="headerlink" href="#what-is-shaker" title="Permalink to this headline">¶</a></h2>
<p>Shaker is an asset rollup management tool for Mojito applications which reduces the number of HTTP requests, thus improving performance.</p>
<p>A rollup consists of one or more input files that are combined (rolled up) to produce a single output file. Rollups can be as simple as a single file, a single mojit binder and its dependencies, or any combination thereof.</p>
<p>Shaker allows you to create rollups using different combination of dimensions. For example, you may want to serve different assets when people are connected from different devices, different countries, etc.</p>
</div>
<div class="section" id="why-shaker">
<h2>Why Shaker?<a class="headerlink" href="#why-shaker" title="Permalink to this headline">¶</a></h2>
<p>Mojito does not have the ability to serve complex rollups. Shaker improves Mojito’s rollup abilities in many ways.</p>
<p><strong>Example:</strong> This is how you dynamically add your assets in Mojito, based on some dimension (in this case, the device):</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// controller logic</span>
<span class="kd">var</span> <span class="nx">device</span> <span class="o">=</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">device</span><span class="p">,</span>
<span class="nx">css</span> <span class="o">=</span> <span class="s1">&#39;/static/device/assets/simple&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">device</span> <span class="o">===</span> <span class="s1">&#39;iphone&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">css</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">device</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">css</span> <span class="o">+=</span> <span class="s1">&#39;.css&#39;</span><span class="p">;</span>

<span class="nx">ac</span><span class="p">.</span><span class="nx">assets</span><span class="p">.</span><span class="nx">addCss</span><span class="p">(</span><span class="nx">css</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Example:</strong> this is how you dynamically add your assets with <strong>Shaker:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// No logic to write!</span>
<span class="c1">// Rollups are picked up automatically based on dependencies, context and filenames :)</span>
</pre></div>
</div>
<p>When dealing with multiple dimensions, the logic that you have to write can quickly become complicated. With Shaker, we do all of this automatically for you. You just put your assets with the right name and Shaker will take care of adding them if needed.</p>
</div>
<div class="section" id="overall-goals">
<h2>Overall Goals<a class="headerlink" href="#overall-goals" title="Permalink to this headline">¶</a></h2>
<p>The overall goal for Shaker is to deploy all client-side assets (such as CSS and JavaScript code), in the most performant way possible. This means serving optimized CSS and JS for every set of contexts (devices, buckets, regions, languages...), minimizing the time and the bandwidth used.</p>
<p>Moreover, this optimization has to be done with no effort by developers (set-and-forget).</p>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="41%" />
<col width="0%" />
<col width="0%" />
<col width="0%" />
<col width="0%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Stories ID</th>
<th class="head" colspan="6">Goals</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AUTO-COMPILER</span></tt></td>
<td colspan="6">The process of optimizing the assets should be totally
automated, just configuration.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">CONTEXTUALIZE</span></tt></td>
<td colspan="6">Serve the right and minimum CSS/JS depending on the context.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">BUNDLE-CSS</span></tt></td>
<td colspan="6">All CSS has to be bundled and loaded in one single request
on the top of the page.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">BUNDLE-JS</span></tt></td>
<td colspan="6">All JS should be bundled to reduce the number of requests.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">DYNAMIC-JS</span></tt></td>
<td colspan="6">All scripts load dynamically and in parallel. Rendering is
never blocked.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">CDN</span></tt></td>
<td colspan="6">All assets are comming from CDN.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">COMPRESS</span></tt></td>
<td colspan="6">All assets should be CSS/JS-linted (for develop) and minified
(for production).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">INLINE</span></tt></td>
<td colspan="6">Inline any given CSS/JS file through naming/configuration.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">HIGH-COVERAGE</span></tt></td>
<td colspan="6">Ability to define ahead of time which mojits to bundle together
for the first flush of the page.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">LOW-COVERAGE</span></tt></td>
<td colspan="6">Load at any given time (lazy/dynamic load) a mojit with its
own JS and CSS bundle.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MOJIT-BUNDLE</span></tt></td>
<td colspan="6">Define (through config) which resources of a mojit to include
in a given bundle (views, binders, controllers, langs...)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">K-WEIGHT</span></tt></td>
<td colspan="6">Split JavaScript bundles in small chunks in order to
parallelize requests.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="benefits">
<h2>Benefits<a class="headerlink" href="#benefits" title="Permalink to this headline">¶</a></h2>
<div class="section" id="simple-conventions">
<h3>Simple Conventions<a class="headerlink" href="#simple-conventions" title="Permalink to this headline">¶</a></h3>
<p>Following the Shaker conventions greatly simplifies configuring your application to use Shaker.</p>
</div>
<div class="section" id="powerful-customization">
<h3>Powerful Customization<a class="headerlink" href="#powerful-customization" title="Permalink to this headline">¶</a></h3>
<p>Shaker allows you to customize your rollups based on any combination of context dimension values. And if desired, rollups can be further customized via powerful options/features.</p>
</div>
<div class="section" id="set-and-forget">
<h3>Set-and-Forget<a class="headerlink" href="#set-and-forget" title="Permalink to this headline">¶</a></h3>
<p>Shaker is designed to eliminate the long term costs associated with maintaining a large number of rollups. Once an application is configured to use Shaker, there is nothing left to do from a developer standpoint. Shaker takes care of everything from that point on.</p>
</div>
<div class="section" id="zero-produtionize-work-cost">
<h3>Zero Produtionize work-cost<a class="headerlink" href="#zero-produtionize-work-cost" title="Permalink to this headline">¶</a></h3>
<p>Once your app is configured properly to use Shaker, you will be able to push to production automatically just invoking shaker on build time to prepare the updated necessary assets</p>
</div>
</div>
</div>

   </div>
